<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bhadrakali Standard Fireworks - Celebrate with Joy!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a0033 0%, #330066 50%, #1a0033 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        .sparkle {
            position: fixed; width: 3px; height: 3px; background: #ffd700; border-radius: 50%;
            animation: sparkleFloat 4s infinite; pointer-events: none; z-index: 1;
        }
        @keyframes sparkleFloat { 0%,100%{opacity:0;transform:translateY(0) scale(0);} 50%{opacity:1;transform:translateY(-100px) scale(1);} }
        header {
            background: linear-gradient(90deg, #ff6b35 0%, #f7931e 50%, #ff6b35 100%);
            padding: 12px 16px;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
            position: sticky; top: 0; z-index: 100;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-size: 1.5rem; font-weight: 700; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .cart-icon { position: relative; cursor: pointer; transition: transform 0.3s;}
        .cart-icon:hover { transform: scale(1.06); }
        .cart-icon svg { width: 30px; height: 30px; fill: #fff; }
        .cart-count {
            position: absolute; top: -8px; right: -8px; background: #d4145a; color: #fff;
            width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 0.72rem; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        .banner {
            background: linear-gradient(135deg, #d4145a 0%, #ff6b35 100%);
            padding: 14px 30px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
            animation: bannerGlow 2s infinite alternate;
            position: relative;
        }
        .banner-left, .banner-center, .banner-right {
            display: flex; align-items: center;
        }
        .banner-left {
            min-width: 0;
            flex: 1 1 0;
            justify-content: flex-start;
        }
        .banner-center {
            justify-content: center;
            flex: 2 1 0;
        }
        .banner-right {
            min-width: 0;
            flex: 1 1 0;
            justify-content: flex-end;
        }
        .banner-left-message {
            font-size: 1.12rem;
            font-weight: 600;
            color: #fff;
            white-space: nowrap;
            text-align: left;
        }
        .banner-center-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.13);
            letter-spacing: 1px;
            margin: 0 24px;
            text-align: center;
            white-space: nowrap;
        }
        .banner-right-contact {
            font-size: 1.05rem;
            font-weight: 600;
            color: #ffd700;
            white-space: nowrap;
            text-align: right;
        }
        @keyframes bannerGlow { 0%{ box-shadow: 0 4px 10px rgba(212,20,90,0.3);} 100%{ box-shadow: 0 4px 20px rgba(212,20,90,0.6);} }
        .container { max-width: 1200px; margin: 28px auto; padding: 0 16px; }
        .section-title {
            text-align: center; font-size: 2rem; margin-bottom: 18px; color: #ffd700;
            text-shadow: 2px 2px 8px rgba(255,215,0,0.5);
        }
        .lists-wrapper {
            display: grid; gap: 16px;
            grid-template-columns: 1fr;
        }
        @media (min-width: 900px) {
            .lists-wrapper { grid-template-columns: 1fr 1fr; }
        }
        .product-list { list-style: none; display: grid; grid-template-columns: 1fr; gap: 10px; }
        .product-row {
            display: flex; align-items: center; gap: 10px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,215,0,0.25);
            border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.22);
            overflow: hidden; transition: transform 0.15s, box-shadow 0.15s; padding: 8px;
            min-height: 56px;
        }
        .product-row:hover { transform: translateY(-2px); box-shadow: 0 7px 18px rgba(0,0,0,0.3); }
        .product-thumb {
            width: 56px; min-width: 56px; height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex; align-items: center; justify-content: center;
            color: #fff; font-weight: 600; font-size: 0.72rem; text-align: center; padding: 4px;
        }
        .product-details { flex: 1; display: flex; align-items: center; }
        .product-title { font-size: 0.98rem; font-weight: 600; color: #ffd700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .product-actions { min-width: 150px; display: flex; gap: 8px; align-items: center; justify-content: flex-end; }
        .product-price-large { font-size: 1.05rem; font-weight: 700; color: #ff6b35; }
        .add-to-cart-btn {
            width: auto; min-width: 110px; padding: 8px 10px;
            background: linear-gradient(135deg, #d4145a 0%, #ff6b35 100%);
            color: #fff; border: none; border-radius: 8px; font-size: 0.88rem; font-weight: 600;
            cursor: pointer; transition: all 0.2s; box-shadow: 0 3px 8px rgba(212, 20, 90, 0.3);
        }
        .add-to-cart-btn:hover { transform: translateY(-1px); box-shadow: 0 5px 12px rgba(212,20,90,0.45); }
        .add-to-cart-btn:active { transform: translateY(0); }
        .cart-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; justify-content: center; align-items: center; }
        .cart-modal.active { display: flex; }
        .cart-content { background: linear-gradient(135deg, #2a0845 0%, #4a1672 100%); padding: 24px; border-radius: 14px; max-width: 480px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 2px solid #ffd700; }
        .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .cart-title { font-size: 1.6rem; color: #ffd700; }
        .close-cart { cursor: pointer; font-size: 1.8rem; color: #fff; transition: color 0.3s; }
        .close-cart:hover { color: #ff6b35; }
        .cart-items { margin-bottom: 16px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px; margin-bottom: 8px; }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-weight: 600; color: #ffd700; margin-bottom: 4px; }
        .cart-item-price { color: #ff6b35; }
        .cart-item-controls { display: flex; align-items: center; gap: 8px; }
        .qty-btn { background: #ff6b35; color: #fff; border: none; width: 28px; height: 28px; border-radius: 5px; cursor: pointer; font-weight: 600; transition: background 0.3s; }
        .qty-btn:hover { background: #d4145a; }
        .qty-display { font-weight: 600; min-width: 28px; text-align: center; }
        .remove-btn { background: #d4145a; color: #fff; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; transition: background 0.3s; }
        .remove-btn:hover { background: #a01047; }
        .cart-total { font-size: 1.3rem; font-weight: 700; text-align: right; margin: 16px 0; color: #ffd700; }
        .checkout-btn { width: 100%; padding: 12px; background: linear-gradient(135deg, #ffd700 0%, #ff6b35 100%); color: #1a0033; border: none; border-radius: 8px; font-size: 1.05rem; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 10px rgba(255,215,0,0.3); }
        .checkout-btn:hover { transform: scale(1.03); box-shadow: 0 6px 14px rgba(255,215,0,0.5); }
        .checkout-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .empty-cart { text-align: center; padding: 28px; color: #ccc; }
        footer { background: rgba(0,0,0,0.3); padding: 24px 16px; text-align: center; margin-top: 40px; }
        .footer-message { font-size: 1rem; color: #ffd700; margin-bottom: 8px; }
        .footer-note { color: #ccc; font-size: 0.85rem; }
        @media (max-width: 768px) {
            .banner { flex-direction: column; align-items: stretch; text-align: left; padding: 12px 12px;}
            .banner-left-message, .banner-center-title, .banner-right-contact { text-align: left; margin: 2px 0;}
            .banner-center-title { font-size: 1.1rem; margin: 0; }
        }
    </style>
</head>
<body>
    <script>
        for (let i = 0; i < 20; i++) {
            const s = document.createElement('div');
            s.className = 'sparkle';
            s.style.left = Math.random() * 100 + '%';
            s.style.animationDelay = Math.random() * 4 + 's';
            document.body.appendChild(s);
        }
    </script>
    <header>
        <div class="logo" style="width:100%; text-align:center;">🪔Bhadrakali Standard Fireworks🪔</div>
        <div class="cart-icon" onclick="toggleCart()" aria-label="Open cart" role="button" tabindex="0">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <span class="cart-count" id="cartCount">0</span>
        </div>
    </header>
    <div class="banner" role="status">
        <div class="banner-left">
            <span class="banner-left-message">💥 Happy Diwali! Shop Your Favorite Crackers 🎆</span>
        </div>
        <div class="banner-right">
            <span class="banner-right-contact">📞 Sampath-9948894462</span>
        </div>
    </div>
    <div class="container">
        <marquee behavior="scroll" direction="left" scrollamount="6" style="color:#ffd700; font-weight:600; font-size:1.1rem; margin-bottom:10px;">
    🚚      For door delivery: Add items to cart, download invoice, share on WhatsApp — we will do COD. 💥
        </marquee>
        <h2 class="section-title">✨ Featured Crackers ✨</h2>
        <div class="lists-wrapper" id="listsWrapper">
            <ul class="product-list" id="productListLeft" role="list"></ul>
            <ul class="product-list" id="productListRight" role="list"></ul>
        </div>
    </div>
    <div class="cart-modal" id="cartModal" aria-modal="true" role="dialog" aria-label="Shopping cart">
        <div class="cart-content">
            <div class="cart-header">
                <h2 class="cart-title">🛒 Your Cart</h2>
                <span class="close-cart" onclick="toggleCart()" role="button" aria-label="Close cart">&times;</span>
            </div>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-total" id="cartTotal"></div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout 🎉</button>
        </div>
    </div>
    <footer>
        <div class="footer-message">🎆 Wishing you a bright and prosperous Diwali! 🪔</div>
        <div class="footer-note">⚠️ Celebrate Diwali Responsibly - Follow safety guidelines while using crackers</div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Products -- (exact JS code as previously provided)
        const products = [
            { id: 1, name: "GANESH DLX 	Bomb", price: 116, color: "#FF6B35" },
            { id: 2, name: "10CM ELE Sparklers ", price: 35, color: "#D4145A" },
            { id: 3, name: "15CM ELE Sparklers", price: 90, color: "#FFD700" },
            { id: 4, name: "30CM ELE Sparklers", price: 139, color: "#F7931E" },
            { id: 5, name: "30CM ELE Sparklers SPL", price: 169, color: "#9B59B6" },
            { id: 6, name: "30CM Red Sparklers", price: 149, color: "#E74C3C" },
            { id: 7, name: "55CM SPL Sparklers", price: 549, color: "#3498DB" },
            { id: 8, name: "SPL Flower Pot", price: 150, color: "#2ECC71" },
            { id: 9, name: "ASHOKA Flower Pot SPL ", price: 319, color: "#E67E22" },
            { id: 10, name: "MEGA SIREN	Flower Pot ", price: 499, color: "#1ABC9C" },
            { id: 11, name: "COLOUR KOTI Flower pot", price: 419, color: "#34495E" },
            { id: 12, name: "COL KOTI DLX Flower Pot SPL BIG", price: 1199, color: "#C0392B" },
            { id: 13, name: "Flower Pot.BIG (STD)", price: 295, color: "#FF6B35" },
            { id: 14, name: "MIRACLE POT Fancy 5 BIG PC's", price: 1685, color: "#D4145A" },
            { id: 15, name: "G.C. ASHOKA Ground Chakkar", price: 129, color: "#FFD700" },
            { id: 16, name: "G.C. SPL Ground Chakkar", price: 199, color: "#F7931E" },
            { id: 17, name: "DLX Ground Chakkar", price: 358, color: "#9B59B6" },
            { id: 18, name: "LOTUS WHEEL Ground Chakkar SPL", price: 240, color: "#E74C3C" },
            { id: 19, name: "SPL DLX Ground Chakkar Standard", price: 399, color: "#3498DB" },
            { id: 20, name: "BIRD Bomb", price: 15, color: "#2ECC71" },
            { id: 21, name: "3 SOUND Bomb", price: 72, color: "#E67E22" },
            { id: 22, name: "BULLET BOMB", price: 99, color: "#1ABC9C" },
            { id: 23, name: "4 inc DLX Bomb", price: 60, color: "#34495E" },
            { id: 24, name: "4inc LAXMI", price: 45, color: "#C0392B" },
            { id: 25, name: "BAZI ATOM Bomb Hydrogen", price: 259, color: "#FF6B35" },
            { id: 26, name: "1.5 T. STAR Thread", price: 45, color: "#D4145A" },
            { id: 27, name: "DLX T. STAR Thread", price: 150, color: "#FFD700" },
            { id: 28, name: "Ring Cap Kids Gun spl", price: 15, color: "#F7931E" },
            { id: 29, name: "Pop Pop 20 pc Kids SPL", price: 375, color: "#9B59B6" },
            { id: 30, name: "Pop Pop 50 pc box Kids", price: 725, color: "#E74C3C" },
            { id: 31, name: "28 CHORSA Ladi Small", price: 29, color: "#3498DB" },
            { id: 32, name: "100 WALA Ladi", price: 89, color: "#2ECC71" },
            { id: 33, name: "1000 WALA Ladi", price: 599, color: "#E67E22" },
            { id: 34, name: "2000 WALA Ladi STD", price: 1199, color: "#1ABC9C" },
            { id: 35, name: "5000 WALA Ladi", price: 2799, color: "#34495E" },
            { id: 36, name: "1000 WALA Ladi", price: 4789, color: "#C0392B" },
            { id: 37, name: "1000 WALA Ladi STD", price: 1599, color: "#FF6B35" },
            { id: 38, name: "2000 WALA Ladi STD", price: 2399, color: "#D4145A" },
            { id: 39, name: "BABY ROCKET", price: 100, color: "#FFD700" },
            { id: 40, name: "SPEED ROCK", price: 149, color: "#F7931E" },
            { id: 41, name: "LUNIK ROCKET", price: 329, color: "#9B59B6" },
            { id: 42, name: "Super Whistel Rocket", price: 599, color: "#E74C3C" },
            { id: 43, name: "MAGIC Snake Fancy", price: 20, color: "#3498DB" },
            { id: 44, name: "Spl BUTTERFLY Fancy", price: 240, color: "#2ECC71" },
            { id: 45, name: "PHOTO FLASH Fancy", price: 99, color: "#E67E22" },
            { id: 46, name: "TOP SPINNER Fancy", price: 299, color: "#1ABC9C" },
            { id: 47, name: "Joy HELICOPTER	Fancy", price: 329, color: "#34495E" },
            { id: 48, name: "TIM TOM Fancy", price: 120, color: "#C0392B" },
            { id: 49, name: "MEGA PEACOCK Fancy", price: 1249, color: "#FF6B35" },
            { id: 50, name: "LEMON TREE	Fancy", price: 189, color: "#D4145A" },
            { id: 51, name: "TOP GUN Fancy", price: 549, color: "#FFD700" },
            { id: 52, name: "S.EGG DLX Fancy", price: 299, color: "#F7931E" },
            { id: 53, name: "S.EGG BIG", price: 399, color: "#9B59B6" },
            { id: 54, name: "Ganga Jamuna Fancy", price: 225, color: "#E74C3C" },
            { id: 55, name: "Magic Crackerling mela Fancy", price: 450, color: "#3498DB" },
            { id: 56, name: "Spl Butterfly 8IN1	Fancy", price: 199, color: "#2ECC71" },
            { id: 57, name: "IRON MAN Match box Fancy", price: 400, color: "#E67E22" },
            { id: 58, name: "Electric Crackers", price: 129, color: "#1ABC9C" },
            { id: 59, name: "VIJAYA MATCHES", price: 50, color: "#34495E" },
            { id: 60, name: "Mega Combo Pack", price: 599, color: "#C0392B" },
            { id: 61, name: "Super Hero 10 in 1	Match box Fancy", price: 599, color: "#FF6B35" },
            { id: 62, name: "RAJA 12 PENCIL ", price: 180, color: "#D4145A" },
            { id: 63, name: "CARNIVAL G/B 20 items Giftbox", price: 899, color: "#FFD700" },
            { id: 64, name: "CHOTA BHEEM 12 items Giftbox", price: 499, color: "#F7931E" },
            { id: 65, name: "GOLD 40 ITEMS Giftbox", price: 2199, color: "#9B59B6" },
            { id: 66, name: "2 COM(3P)Shot", price: 529, color: "#E74C3C" },
            { id: 67, name: "SKY WORKS", price: 459, color: "#3498DB" },
            { id: 68, name: "12 WHISTLING", price: 749, color: "#2ECC71" },
            { id: 69, name: "20 SHOT Standard", price: 1179, color: "#E67E22" },
            { id: 70, name: "60 SHOT", price: 2379, color: "#1ABC9C" },
            { id: 71, name: "3.5 com SPL Shots", price: 2179, color: "#34495E" },
            { id: 72, name: "120 SHOT", price: 4789, color: "#C0392B" },
            { id: 73, name: "100 SHOT Colours", price: 8149, color: "#C0392B" }
        ];
        let cart = [];
        function adjustBrightness(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 +
                (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255))
                .toString(16).slice(1);
        }
        function renderProducts() {
            const left = document.getElementById('productListLeft');
            const right = document.getElementById('productListRight');
            const leftItems = [];
            const rightItems = [];
            products.forEach((p, idx) => (idx % 2 === 0 ? leftItems : rightItems).push(p));
            left.innerHTML = leftItems.map(renderItem).join('');
            right.innerHTML = rightItems.map(renderItem).join('');
        }
        function renderItem(product) {
            const darker = adjustBrightness(product.color, -30);
            const shortLabel = product.name.split(' ')[0];
            return `
                <li class="product-row">
                    <div class="product-thumb" style="background: linear-gradient(135deg, ${product.color} 0%, ${darker} 100%);">
                        ${shortLabel}
                    </div>
                    <div class="product-details">
                        <div class="product-title" title="${product.name}">${product.name}</div>
                    </div>
                    <div class="product-actions">
                        <div class="product-price-large">₹${product.price}</div>
                        <button class="add-to-cart-btn" aria-label="Add ${product.name} to cart" onclick="addToCart(${product.id})">
                            Add to Cart 🛒
                        </button>
                    </div>
                </li>
            `;
        }
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) existingItem.quantity++;
            else cart.push({ ...product, quantity: 1 });
            updateCart();
        }
        function updateCart() {
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">Your cart is empty 🛒</div>';
                cartTotal.innerHTML = '';
                return;
            }
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">₹${item.price} × ${item.quantity}</div>
                    </div>
                    <div class="cart-item-controls">
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)" aria-label="Decrease ${item.name} quantity">-</button>
                        <span class="qty-display" aria-live="polite">${item.quantity}</span>
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)" aria-label="Increase ${item.name} quantity">+</button>
                        <button class="remove-btn" onclick="removeItem(${item.id})" aria-label="Remove ${item.name} from cart">✕</button>
                    </div>
                </div>
            `).join('');
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.innerHTML = `Total: ₹${total}`;
        }
        function updateQuantity(productId, change) {
            const item = cart.find(i => i.id === productId);
            if (!item) return;
            item.quantity += change;
            if (item.quantity <= 0) removeItem(productId);
            else updateCart();
        }
        function removeItem(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }
        function toggleCart() {
            document.getElementById('cartModal').classList.toggle('active');
        }
        function checkout() {
            if (cart.length === 0) { alert('Your cart is empty!'); return; }
            const buyerName = prompt('Please enter your name for the invoice:');
            if (!buyerName || buyerName.trim() === '') { alert('Name is required to generate invoice!'); return; }
            const buyerContact = prompt('Please enter your contact number for the invoice:');
            if (!buyerContact || buyerContact.trim() === '') { alert('Contact number is required to generate invoice!'); return; }
            const buyerAddress = prompt('Please enter your address for the invoice:');
            if (!buyerAddress || buyerAddress.trim() === '') { alert('Address is required to generate invoice!'); return; }
            generatePDF(buyerName.trim(), buyerContact.trim(), buyerAddress.trim());
        }
        function generatePDF(buyerName, buyerContact, buyerAddress) {
            try {
                const { jsPDF } = window.jspdf;
                if (!jsPDF) { alert('PDF library not loaded. Please refresh the page and try again.'); return; }
                const doc = new jsPDF();
                doc.setFillColor(255, 107, 53); doc.rect(0, 0, 210, 40, 'F');
                doc.setTextColor(255,255,255); doc.setFontSize(24); doc.setFont('helvetica','bold');
                doc.text('Diwali Crackers Shop', 105, 20, { align: 'center' });
                doc.setFontSize(14); doc.setFont('helvetica','normal'); doc.text('Purchase Invoice', 105, 30, { align: 'center' });
                doc.setTextColor(0,0,0); doc.setFontSize(12);
                doc.text('Customer Name: ' + buyerName, 20, 55);
                doc.text('Contact: ' + buyerContact, 20, 65);
                doc.text('Address: ' + buyerAddress, 20, 75, { maxWidth: 170 });
                doc.text('Date: ' + new Date().toLocaleDateString('en-IN'), 20, 85);
                doc.text('Invoice #: INV-' + Date.now().toString().slice(-6), 20, 95);
                doc.setFillColor(212,20,90); doc.rect(20, 105, 170, 10, 'F');
                doc.setTextColor(255,255,255); doc.setFont('helvetica','bold'); doc.setFontSize(11);
                doc.text('Product', 25, 112);
                doc.text('Qty', 115, 112, { align: 'center' });
                doc.text('Price', 145, 112, { align: 'right' });
                doc.text('Total', 175, 112, { align: 'right' });
                let yPos = 125;
                let grandTotal = 0;
                doc.setTextColor(0,0,0); doc.setFont('helvetica','normal'); doc.setFontSize(10);
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity; grandTotal += itemTotal;
                    if (index % 2 === 0) { doc.setFillColor(245,245,245); doc.rect(20, yPos - 6, 170, 10, 'F'); }
                    doc.text(item.name, 25, yPos);
                    doc.text(String(item.quantity), 115, yPos, { align: 'center' });
                    doc.text('Rs. ' + item.price, 145, yPos, { align: 'right' });
                    doc.text('Rs. ' + itemTotal, 175, yPos, { align: 'right' });
                    yPos += 12;
                });
                yPos += 5; doc.setFillColor(255,215,0); doc.rect(20, yPos, 170, 12, 'F');
                doc.setFont('helvetica','bold'); doc.setFontSize(14); doc.setTextColor(0,0,0);
                doc.text('Grand Total:', 120, yPos + 8);
                doc.text('Rs. ' + grandTotal, 175, yPos + 8, { align: 'right' });
                yPos += 25; doc.setFontSize(12); doc.setFont('helvetica','italic'); doc.setTextColor(212,20,90);
                doc.text('Thank you for shopping with us!', 105, yPos, { align: 'center' });
                doc.text('Happy Diwali!', 105, yPos + 8, { align: 'center' });
                yPos += 20; doc.setFontSize(9); doc.setFont('helvetica','normal'); doc.setTextColor(100,100,100);
                doc.text('Celebrate responsibly and follow all safety guidelines', 105, yPos, { align: 'center' });
                const fileName = 'Diwali_Invoice_' + buyerName.replace(/\s+/g, '_') + buyerContact.replace(/\s+/g, '_') + buyerAddress.replace(/\s+/g, '_') +'_' + Date.now() + '.pdf';
                doc.save(fileName);
                setTimeout(() => { alert('✅ Invoice downloaded successfully!\n\nThank you for your purchase, ' + buyerName + '!\nHappy Diwali! 🎆'); cart = []; updateCart(); toggleCart(); }, 300);
            } catch (error) {
                console.error('PDF Generation Error:', error);
                alert('Error generating PDF: ' + error.message + '\n\nPlease try again or contact support.');
            }
        }
        window.addEventListener('load', function () {
            renderProducts();
            updateCart();
        });
    </script>
</body>
</html>
